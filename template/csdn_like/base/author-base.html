<html>
    <head>
        <meta charset="UTF-8">
        {% raw config.custom_meta %}
        <meta http-equiv="Cache-Control" content="no-transform" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <title>{{ site_name }}{{ data['author']['user_name']}}</title>
        <meta name="keywords" content="">
        <meta name="description" content="" />
        {% include common-header.html %}
        {% include common-front-header.html %}

        {% raw config.analytics_code %}
    </head>
    <body class='author-page'>
        {% block header %}
            {% include ../component/header.html %}
        {% end %}
        {% block content-body %}
        <div class="container">
            <div class="author-banner">
                <img src="/static/svgs/open-book.svg" />
                <div class="banner-title">
                    {{data['author']['user_name']}} 的主頁
                </div>
            </div>
        </div>
        <div id="content-wrapper" class="container">
            <div class="content">
                <!--TODO 顶部面包屑导航 -->
                <div class="secondary-content">
                    {% block left_sidebar %}
                    {% end %}
                </div>
                <div class="main-content">
                    {% include ../component/author/author_list.html %}
                    {% block pagination %}
                        {% include ../component/pagination.html %}
                    {% end %}
                </div>
            </div>
            {% block footer %}
                {% include ../component/footer.html %}
            {% end %}
        </div>
        {% end %}
        {#
    <script>
        author_id = "{{ data['author']['_id'] }}";
        layui.use('laypage', function(){
            var laypage = layui.laypage;

          //执行一个laypage实例
          laypage.render({
            elem: 'pagination', //注意，这里的 test1 是 ID，不用加 # 号
            count: {{ data['post_number'] }} ,
            curr: {{ data['page']}},
             limit:15 ,
                 layout: ['count', 'prev', 'page', 'next'],
                theme: '#fd484d',
                jump: function(obj, first){
        //obj包含了当前分页的所有参数，比如：
        //console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
        //console.log(obj.limit); //得到每页显示的条数

            //首次不执行
            if(!first){
                current = '/u/' + "{{ data['author']['_id'] }}" + '/' + obj.curr;
                window.location.href = current;
            }
          }
          });
        });
    </script>
    #}
    </body>
</html>